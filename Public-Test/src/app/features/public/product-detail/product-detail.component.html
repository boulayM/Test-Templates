<section class="product-detail">
  @if (loading) {
    <p>Chargement...</p>
  } @else if (!product) {
    <div class="ds-alert ds-alert-warning">Produit introuvable.</div>
  } @else {
    <div class="card-ui">
      <h2>{{ product.name }}</h2>
      <p>{{ product.description }}</p>
      <p><strong>{{ product.price | currency: 'EUR' }}</strong></p>
    </div>

    <div class="card-ui">
      <h3>Laisser un avis</h3>
      <label>Note (1-5)</label>
      <input type="number" min="1" max="5" [(ngModel)]="rating" />
      <label>Commentaire</label>
      <textarea rows="3" [(ngModel)]="comment"></textarea>
      <button class="btn-ui btn-primary btn-sm" (click)="submitReview()">Publier</button>
    </div>

    <div class="card-ui">
      <h3>Avis</h3>
      @if (reviews.length === 0) {
        <p>Aucun avis.</p>
      } @else {
        <ul>
          @for (review of reviews; track review.id) {
            <li>
              <strong>{{ review.rating }}/5</strong> - {{ review.comment || 'Sans commentaire' }}
              <button class="btn-ui btn-danger btn-sm" (click)="deleteReview(review.id)">Supprimer</button>
            </li>
          }
        </ul>
      }
    </div>
  }
</section>
